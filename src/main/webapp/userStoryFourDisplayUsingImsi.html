<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>UserStoryFour</title>

<link type="text/css" href="media/bootstrap-3.3.6-dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" media="all" href="media/css/daterangepicker.css" />
<script type="text/javascript" src="media/js/jquery.js"></script>
<script type="text/javascript" src="media/js/bootstrap.min.js"></script>
<script type="text/javascript" src="media/js/moment.min.js"></script>
<script type="text/javascript" src="media/js/daterangepicker.js"></script>

<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/style1.css">

</head>
<title>User Story Four</title>
</head>
<body class='indexPage'>
<!-- 
<p>User story #4 - As Customer Service Rep. 
I want to display, 
for a given affected IMSI, the Event ID and Cause Code for any / all failures affecting that IMSI
</p>
 -->

	<br>
	<br>

	<div class="login-card">
	<form role="form" id="details">		
		<div class="dropdown">
			<label>Select available IMSI values:</label>  
			<br>
			<select class="form-control" id="imsi"></select>
		</div>
		<br>
		
		<input type="submit" class="login login-submit" value="Submit">
		</form>
		<a onclick="Help()" href="#">help</a>
	</div>

<!--  

	<div class="login-card">
	
		<div class="dropdown">
			<label>Select Phone Model:</label> 
			<br>
			<select class="form-control" id="model"></select>
		</div>

		<div class="dropdown">
		<select class="form-control" id="model"></select>
		</div>
		
			<input type="submit" name="imsiVal" class="imsi-submit"
				onClick="GetSelectedItem(imageTable)" value="SUBMIT IMSI">
		
		<div id="tableContainer">
			<table align="center" id="imageTable" border="3"></table>
		</div>
		<div id=response></div>
	</div>
	
	-->

	<!--  
<a
	href="http://localhost:8080/TheBeanQuartet/rest/basedata/imsi"
	class="list-group-item">Link to imsi data JSON
</a> 
<a
	href="http://localhost:8080/TheBeanQuartet/rest/basedata/imsirelation"
	class="list-group-item">Link to imsi related data JSON
</a>
-->

	<script>
		//get a reference to the select element
		var $select = $('#imsi');
		var $tbSelect = $('#imageTable');

		//request the JSON data and parse into the select element
		$.ajax({
			url : 'http://localhost:8080/TheBeanQuartet/rest/basedata/imsi',
			dataType : 'JSON',
			success : function(data) {
				//clear the current content of the select
				$select.html('');
				//iterate over the data and append a select option
				$.each(data.baseDataCollection, function(i, val) {
					$select.append('<option>' + val + '</option>');
					console.log(val);
				})
			}
		});

		$("#details").submit(function getImsiData() {
			var checkImsi = document.getElementById("imsi").value;

			alert(checkImsi);

			$.ajax({
				async : false,
				type : 'POST',
				url : 'rest/basedata/imsirelation',
				data : JSON.stringify(checkImsi),
				success : function islogin(data) {
					var items = [];
					$.each(data, function(key, val) {
						items.push('<li id="' + key + '">' + val + '</li>');
					});
					$('<ul/>', {
						'class' : 'interest-list',
						html : items.join('')
					}).appendTo('body');

				},
				contentType : 'application/json'
			});
			return false;
		});
		function Help(){
			alert(help);
		}
		var help="Select an IMSI to display, the Event ID and Cause Code for any / all failures affecting that IMSI.";
	</script>

</body>
</html>