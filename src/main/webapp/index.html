
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Login</title>

<script type="text/javascript" language="javascript"
	src="media/js/jquery.js"></script>
<script type="text/javascript" language="javascript" class="init"></script>
       <link rel="stylesheet" href="css/style.css">

</head>
<body>
	<div class="login-card">
	<h2 align="center">User Login</h2>
		<form role="form" id="login">
			<input type="text" name="user" placeholder="Username" id="username">
			<input type="password" name="pass" placeholder="Password"id="password"> 
			
			<input type="submit" name="login"class="login login-submit" value="login">
		</form>
	</div>

	<script>
		//constructor function
		function SysUser(userName, userPassword, userType) {
			this.userName = userName;
			this.userPassword = userPassword;
			this.userType = userType;
		}
		$("#login").submit(
			function Login() {
			//	window.open('','UserLogin').location.href = 'http://localhost:8080/TheBeanQuartet/main.html';
				var checkUser = new SysUser(
					document.getElementById("username").value,
					document.getElementById("password").value,
					"x"
				);
				var success = false;  
				$.ajax({
					async:false,
					type : 'POST',
					url : 'rest/user/verify',
					data : JSON.stringify(checkUser),
					success : function islogin(data) {
						if (data) {
							alert("login success");
							success = true;  
						} else {
							alert("login fail");
						}
					},
					contentType : 'application/json'
				});
				
				if (success) { //AND THIS CHANGED
					window.open('','UserLogin').location.href = 'http://localhost:8080/TheBeanQuartet/main.html';
				}
			});
	</script>
</body>

</html>